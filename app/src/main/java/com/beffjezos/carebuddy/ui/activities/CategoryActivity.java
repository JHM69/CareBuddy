package com.beffjezos.carebuddy.ui.activities;import android.os.Bundle;import android.view.MenuItem;import androidx.appcompat.app.AppCompatActivity;import androidx.appcompat.widget.Toolbar;import androidx.viewpager.widget.ViewPager;import com.beffjezos.carebuddy.R;import com.beffjezos.carebuddy.adapters.TabAdapter;import com.beffjezos.carebuddy.ui.fragments.CategoryFragment;import com.beffjezos.carebuddy.ui.fragments.PackageFragment;import com.google.android.material.tabs.TabLayout;import java.util.Objects;public class CategoryActivity extends AppCompatActivity {    private TabAdapter adapter;    private TabLayout tabLayout;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.holder);        Toolbar toolbar = findViewById(R.id.toolbar);        setSupportActionBar(toolbar);        Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);        getSupportActionBar().setDisplayShowHomeEnabled(true);        tabLayout = findViewById(R.id.tabLayout);        ViewPager viewPager = findViewById(R.id.view_pager);        adapter = new TabAdapter(getSupportFragmentManager(), getApplicationContext());        adapter.addFragment(new PackageFragment(), "Package");        adapter.addFragment(new CategoryFragment(), "Category");        viewPager.setAdapter(adapter);        //tabLayout.setSelectedTabIndicator(null);        for (int i = 0; i < tabLayout.getTabCount(); i++) {            TabLayout.Tab tab = tabLayout.getTabAt(i);            assert tab != null;            tab.setCustomView(null);            tab.setCustomView(adapter.getTabView(i));        }        tabLayout.setupWithViewPager(viewPager);        highLightCurrentTab(0); // for initial selected tab view        viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {            @Override            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {            }            @Override            public void onPageSelected(int position) {                highLightCurrentTab(position);            }            @Override            public void onPageScrollStateChanged(int state) {            }        });    }    private void highLightCurrentTab(int position) {        for (int i = 0; i < tabLayout.getTabCount(); i++) {            TabLayout.Tab tab = tabLayout.getTabAt(i);            assert tab != null;            tab.setCustomView(null);            tab.setCustomView(adapter.getTabView(i));        }        TabLayout.Tab tab = tabLayout.getTabAt(position);        assert tab != null;        tab.setCustomView(null);        tab.setCustomView(adapter.getSelectedTabView(position));    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        switch (item.getItemId()) {            case android.R.id.home:                onBackPressed();                return true;        }        return super.onOptionsItemSelected(item);    }}